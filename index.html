<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Starbs Register Practice</title>
  <style>
    html, body {
      margin: 0;
      background: #f4f4f4;
    }

    .wrapper {
      width: 1440px;
      height: 865px;
      transform-origin: top left;
      display: flex;
    }

    body {
      font-family: Arial, sans-serif;
    }

    .cart {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: #FFF9E6;
      padding: 16px;
      max-width: 20%;
    }

    .cart h2 { 
      margin: 0 0 12px; 
      border-bottom: 2px solid #ccc; 
      padding-bottom: 8px; 
    }

    .cart-items { 
      flex: 1;
      overflow-y: auto;
      border-bottom: 1px solid black;
    }

    .cart-item {
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 8px; 
      padding: 8px;      
    }

    .cart-item button { 
      background: #e74c3c; 
      color: white; 
      border: none; 
      padding: 4px 8px; 
      border-radius: 4px; 
      cursor: pointer; }

    .totals { 
      border-top: 2px solid #ccc; 
      padding-top: 12px;
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 4px;
    }

    .void-btn,
    .next-btn,
    .quantity-btn {
      width: 100%;
      padding: 14px;
      font-size: 1.2em;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      margin-top: auto;
      margin-bottom: 4px;
      transition: background 0.2s, transform 0.1s;
    }

    .quantity-btn {
      background: #000;
    }

    .void-btn {
      background: #e74c3c;
    }

    .void-btn:hover {
      background: #c0392b;
    }

    .next-btn {
      background: green;
    }

    .next-btn:hover, .quantity-btn:hover {
      background: #454545;
    }

    .void-btn:active,
    .next-btn:active,
    .quantity-btn:active {
      transform: scale(0.98);
    }

    .cart,
    .modifiers {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .cart {
      padding-bottom: 10px;
    }

    .modifiers {
      display: flex;
      flex-direction: column;
      gap: 8px;
      height: 100%;
      justify-content: flex-start;
      padding-bottom: 10px;
      gap: 8px;
    }

    .cart-item.selected,
    .cart-modifiers span.selected {
      background-color: #89c499;
    }

    .main { 
      flex: 3;
      display: flex;
      flex-direction: column;
      background: #FFFDF5;
    }

    .top-tabs, .bottom-tabs {
      display: flex;
      justify-content: space-around;
      background: #ddd;
      padding: 8px;
    }

    .top-tabs button, .bottom-tabs button, .modifiers button {
      flex: 1;
      font-size: 1.2rem;
      padding: 12px 0;
      margin: 0 5px;
      border-radius: 10px;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }

    .top-tabs button.active {
      background: #bbb;
    }

    .bottom-tabs button.active, .modifiers button.active { 
      background: #FFFDF5;
    }

    .modifiers { 
      width: 9%;
      display: flex;
      flex-direction: column;
      background: #eee;
      padding: 8px;
    }

    .products { 
      flex: 1; 
      display: flex; 
      flex-direction: column; 
      justify-content: space-between; 
      padding: 10px; 
      overflow-y: auto;
    }

    .product-row { 
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
      flex: 1;
    }

    .custom-row {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 4px;
      margin-bottom: 1.5%;
      flex: 1;
    }

    .custom-row .product, .milk .product {
      margin: 0;
    }

    .blended {
      margin-bottom: 50px;
    }

    .product { 
      color: black;
      font-size: 1.1em;
      font-weight: bold;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 1px solid black;
      opacity: 0.8;
      margin: 5% 10% 5% 10%;
    }
    
    .blank { 
      background: transparent;
      pointer-events: none;
      border: none;
    }

    .light-blue { background: rgba(120,173,204,0.8); }
    .light-yellow { background: rgba(255,229,140,0.8); }
    .yellow { background: rgba(255,229,140,1); }
    .grey { background: rgba(163,163,163,0.8); }
    .purple { background: rgba(175,166,237,0.8); }
    .brown { background: rgba(148,119,90,0.8); }
    .light-brown { background: rgba(181,160,139,0.8); }
    .teal { background: rgba(184,230,213,0.8); }
    .green { background: rgba(131, 156, 107,0.8); }
    .bright-green { background: #87c393; }
    .silver { background: rgba(227,227,227,0.8); }
    .black { background: #000; color: #fff; }
    .seasonal-row { background: #DFF5E0; margin-bottom: -0.75%;}

    .cart-modifiers {
      font-size: 0.9em;
      color: #555;
      margin-top: -9px;
      margin-bottom: 8px;
      padding-top: 2px;
      padding-bottom: 10px;
      line-height: 1.5;
      position: relative;
    }

    .cart-modifiers .modifier-text {
      display: block;
      padding-left: 25px;
    }

    .cart-modifiers span.selected  {
      background-color: #6fa17c !important;
    }

    .cart-item.preview + .cart-modifiers.preview {
      background: #a9d6b5;
      padding-top: 4px;
      padding-bottom: 4px;
      white-space: nowrap;
    }

    .cart-item.current,
    .cart-modifiers.current {
      background-color: #a9d6b5 !important;
    }

    .cart-item.selected {
      background-color: #6fa17c !important;
    }

    .quantity-modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .quantity-content {
      background: white;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }

    .quantity-display {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .quantity-grid {
      display: grid;
      grid-template-columns: repeat(3, 60px);
      gap: 10px;
      justify-content: center;
    }

    .quantity-grid .num-btn {
      font-size: 1.5em;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
    }

    #clear-btn {
      text-align: center;
      margin: 0 auto;
    }

    #coldfoams {
      background-image: linear-gradient(to bottom, green, rgba(0, 128, 0, 0));
    }

    #signature {
      margin-top: 2%;
      font-size: 10px;
      text-align: center;
    }

  </style>
</head>
<body>
  <div class="wrapper">
    <div class="cart">
      <h2>Order</h2>
      <div class="cart-items" id="cartItems"></div>
      <div class="totals" id="totals">Total: $0.00</div>
      <button id="quantity-btn" class="quantity-btn">Quantity</button>
      <button id="voidButton" class="void-btn" onclick="voidSelection()">VOID</button>
      <span id="signature">Recreated by Hayley, for my friends at 2907 &hearts;</span>
    </div>

    <div id="quantity-modal" class="quantity-modal" style="display:none;">
      <div class="quantity-content">
        <div class="quantity-display" id="quantity-display">0</div>
        <div class="quantity-grid">
          <button class="num-btn">1</button>
          <button class="num-btn">2</button>
          <button class="num-btn">3</button>
          <button class="num-btn">4</button>
          <button class="num-btn">5</button>
          <button class="num-btn">6</button>
          <button class="num-btn">7</button>
          <button class="num-btn">8</button>
          <button class="num-btn">9</button>
          <button class="num-btn">0</button>
          <button class="num-btn">00</button>
          <button id="quantity-enter" class="num-btn">OK</button>
          <button id="clear-btn" onClick="clearQty()">Clear</button>
        </div>
      </div>
    </div>

    <div id="espressoShotsModal" class="quantity-modal" style="display:none;">
      <div class="quantity-content">
        <h2>Espresso Shots</h2>
        <div class="quantity-grid">
          <button class="num-btn" onclick="handleEspressoShots(1)">1</button>
          <button class="num-btn" onclick="handleEspressoShots(2)">2</button>
          <button class="num-btn" onclick="handleEspressoShots(3)">3</button>
          <button class="num-btn" onclick="handleEspressoShots(4)">4</button>
          <button class="num-btn" onclick="handleEspressoShots(5)">5</button>
          <button class="num-btn" onclick="handleEspressoShots(6)">6</button>
          <button class="num-btn" onclick="handleEspressoShots(7)">7</button>
          <button class="num-btn" onclick="handleEspressoShots(8)">8</button>
          <button class="num-btn" onclick="handleEspressoShots(9)">9</button>
          <button class="num-btn" onclick="handleEspressoShots(10)">10</button>
        </div>

        <div style="margin-top:20px;">
          <label for="customEspressoShots" style="display:block;margin-bottom:5px;">Custom:</label>
          <input id="customEspressoShots" type="number" min="1" max="99" inputmode="numeric" oninput="validateShotInput(this)" placeholder="#" style="font-size:1.2em;padding:8px;width:80px;text-align:center;border-radius:6px;border:1px solid #ccc;">
        </div>

        <div style="margin-top:20px;">
          <button class="num-btn" onclick="submitCustomEspressoShots()">OK</button>
          <button class="num-btn" style="margin-left:10px;" onclick="closeEspressoShots()">Cancel</button>
        </div>
      </div>
    </div>


    <div class="main">
      <div class="top-tabs">
        <button onclick="selectTopTab(this)" id="misc">Misc</button>
        <button onclick="selectTopTab(this)" id="beans">Beans</button>
        <button onclick="selectTopTab(this)" id="rtd">RTD&E</button>
        <button onclick="selectTopTab(this)" id="food">Food</button>
        <button onclick="selectTopTab(this)" id="drink">Drink</button>
      </div>

      <div class="products" id="main-grid"></div>

      <div class="bottom-tabs">
        <button onclick="selectBottomTab(this, 'brewed')">Brewed</button>
        <button onclick="selectBottomTab(this, 'espresso')">Espresso</button>
        <button onclick="selectBottomTab(this, 'blended')">Blended</button>
        <button onclick="selectBottomTab(this, 'tea')">Tea</button>
        <button onclick="selectBottomTab(this, 'other')">Other</button>
      </div>
    </div>

    <div class="modifiers">
      <button onclick="selectRightTab(this, 'decafShots')">Decaf / Shots / Size</button>
      <button onclick="selectRightTab(this, 'syrup')">Syrup</button>
      <button onclick="selectRightTab(this, 'milk')">Milk</button>
      <button onclick="selectRightTab(this, 'custom')">Custom</button>
      <button id="nextDrinkButton" class="next-btn" onclick="nextDrink(), tabReset()">Next Drink</button>
    </div>
  </div>

  <script>
    function resize() {
      const wrapper = document.querySelector(".wrapper");
      const scaleX = window.innerWidth / 1440;
      const scaleY = window.innerHeight / 900;
      const scale = Math.min(scaleX, scaleY);
      wrapper.style.transform = `scale(${scale})`;
    }
    window.addEventListener("resize", resize);
    resize();

    const brewedButtons = `
      <div class="custom-row">
        <div class="product black" onclick="alert('No lol')"><i>Pour Over,<br>Regional<br>& Test</i></div>
      </div>
      <div class="custom-row">
        <div class="product light-blue" onclick="addToCart('Iced Coffee')">Bunn<br>Iced Coffee</div>
        <div class="product light-blue" onclick="addToCart('Iced Coffee Refill')">Bunn<br>Iced Coffee<br>Refill</div>
        <div class="product light-blue" onclick="addToCart('Iced Coffee')">Vertica<br>Iced Coffee</div>
        <div class="product light-blue" onclick="addToCart('Iced Coffee Refill')">Vertica<br>Iced Coffee<br>Refill</div>
        <div class="blank"></div>
      <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product silver" onclick="addToCart('Cold Brew')">Cold Brew</div>
        <div class="product brown" onclick="addToCart('ND Vanilla Sweet Cream Cold Brew')">ND Vanilla<br>Sweet Cream<br>Cold Brew</div>
        <div class="product brown" onclick="addToCart('ND Salted Caramel Cold Brew')">ND Salted<br>Caramel<br>Cold Brew</div>
        <div class="product brown" onclick="addToCart('ND Chocolate Cream CF Cold Brew')">ND Chocolate<br>Cream Cold<br>Brew</div>
        <div class="product brown" onclick="addToCart('ND Vanilla Cream CF Cold Brew')">Cold Brew w/<br>ND Vanilla<br>Cream CF</div>
      <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product silver" onclick="addToCart('Vanilla Sweet Cream Cold Brew')">Vanilla Sweet<br>Cream<br>Cold Brew</div>
        <div class="product silver" onclick="addToCart('Salted Caramel Cream Cold Brew')">Salted<br>Caramel<br>Cold Brew</div>
        <div class="product silver" onclick="addToCart('Chocolate Cream Cold Brew')">Chocolate Cream Cold Brew</div>
        <div class="product silver" onclick="addToCart('ND Chocolate Cream CF Cold Brew')">ND Chocolate<br>Cream Cold<br>Brew</div>
        <div class="product silver" onclick="addToCart('Pumpkin Cream Cold Brew')">Pumpkin<br>Cream<br>Cold Brew</div>
      <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product silver" onclick="addToCart('Nitro Cold Brew')">Nitro<br>Cold Brew</div>
        <div class="product silver" onclick="addToCart('Vanilla Sweet Cream Nitro Cold Brew')">Vanilla Sweet<br>Cream Nitro<br>Cold Brew</div>
        <div class="product brown" onclick="addToCart('Chocolate<br>Protein<br>Cold Brew')">Chocolate Protein Cold Brew</div>
        <div class="blank"></div>
        <div class="blank"></div>
      <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product grey" onclick="addToCart('Pike Place')">Pike Place<br>Vertica</div>
        <div class="product purple" onclick="addToCart('Verona (Dark Roast)')">Caffe Verona<br>Vertica</div>
        <div class="product light-yellow" onclick="addToCart('Veranda (Blonde Roast)')">Veranda<br>Clover<br>Vertica</div>
        <div class="product light-blue" onclick="addToCart('Decaf Pike Place')">Decaf<br>Pike Place<br>Vertica</div>
        <div class="product grey" onclick="addToCart('Casi Cielo<br>Vertica')">Casi Cielo (Medium Roast)</div>
      <div class="blank"></div>
      </div>

       <div class="custom-row">
        <div class="product grey" onclick="addToCart('Pike Place')">Pike Place<br>Bunn</div>
        <div class="product purple" onclick="addToCart('Dark Roast')">Dark Roast<br>Bunn</div>
        <div class="product light-yellow" onclick="addToCart('Blonde Roast')">Blonde<br>Roast<br>Bunn</div>
        <div class="product light-blue" onclick="addToCart('Decaf Pike Place')">Decaf<br>Pike Place<br>Bunn</div>
        <div class="product grey" onclick="addToCart('Hot Coffee Refill')">Hot Coffee Refill</div>
      <div class="product grey" onclick="addToCart('Caffe Misto')">Caffe Misto</div>
      </div>
      `;

    const espressoButtons = `
      <div class="product-row">
        <div class="product purple" onclick="addToCart('Americano')">Americano</div>
        <div class="product purple" onclick="openEspressoShots('espresso')">Espresso</div>
        <div class="product purple" onclick="addToCart('Espresso Macchiato')">Espresso<br>Macchiato</div>
        <div class="product purple" onclick="addToCart('Espresso<br>Con Panna')">Espresso<br>Con Panna</div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product purple" onclick="addToCart('Iced<br>Shaken Espresso')">Iced<br>Shaken Espresso</div>
        <div class="product purple" onclick="addToCart('Brown Sugar Oat<br>Shaken Espresso')">Brown Sugar Oat<br>Shaken Espresso</div>
        <div class="product purple" onclick="addToCart('Iced Hazelnut<br>Oatmilk Shaken Esp')">Iced Hazelnut<br>Oatmilk Shaken<br>Esp</div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Latte')">Latte</div>
        <div class="product light-yellow" onclick="addToCart('Cinnamon Dolce Latte')">Cinnamon Dolce Latte</div>
        <div class="product grey" onclick="addToCart('Cappuccino')">Cappuccino</div>
        <div class="product silver" onclick="addToCart('Flat White')">Flat White</div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Blonde Vanilla Latte')">Blonde Vanilla<br>Latte</div>
        <div class="product light-yellow" onclick="addToCart('Iced Vanilla Cream Protein Latte')">Iced Vanilla<br>Cream<br>Protein Latte</div>
        <div class="product light-yellow" onclick="addToCart('Vanilla Protein Latte')">Vanilla<br>Protein Latte</div>
        <div class="product light-yellow" onclick="addToCart('SF Vanilla Protein Latte')">SF Vanilla<br>Protein Latte</div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product purple" onclick="addToCart('Caramel<br>Macchiato')">Caramel<br>Macchiato</div>
        <div class="product silver" onclick="addToCart('Cortado')">Cortado</div>
        <div class="product silver" onclick="addToCart('Brown Sugar Oat<br>Cortado')">Brown Sugar Oat<br>Cortado</div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product brown" onclick="addToCart('Mocha')">Mocha</div>
        <div class="product brown" onclick="addToCart('White Chocolate<br>Mocha')">White Chocolate<br>Mocha</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="product-row seasonal-row">
        <div class="product light-yellow" onclick="addToCart('Seasonal Drink')">Seasonal Drink</div>
        <div class="product light-yellow" onclick="addToCart('Seasonal Drink')">Seasonal Drink</div>
        <div class="product silver" onclick="addToCart('Seasonal Drink')">Seasonal Drink</div>
        <div class="blank"></div>
        <div class="product black" onclick="alert('Nosey!')"><i>More Seasonal,<br>Regional & Test</i></div>
      </div>
      `;

    const blendedButtons = `
      <div class="product-row blended">
        <div class="product brown" onclick="addToCart('Coffee Frappuccino')">Coffee<br>Frappuccino</div>
        <div class="product brown" onclick="addToCart('Mocha Frappuccino')">Mocha<br>Frappuccino</div>
        <div class="product brown" onclick="addToCart('Caramel Frappuccino')">Caramel<br>Frappuccino</div>
        <div class="product brown" onclick="addToCart('Caramel Ribbon Crunch')">Caramel Ribbon<br>Crunch</div>
        <div class="product brown" onclick="addToCart('Mocha Cookie Crumble')">Mocha Cookie<br>Crumble</div>
      </div>

      <div class="product-row blended">
        <div class="product silver" onclick="addToCart('Matcha Creme Frappuccino')">Matcha<br>Creme<br>Frappuccino</div>
        <div class="product silver" onclick="addToCart('Syrup Creme Frappuccino')">Syrup<br>Creme<br>Frappuccino</div>
        <div class="product silver" onclick="addToCart('Strawberry Creme Frappuccino')">Strawberry<br>Creme<br>Frappuccino</div>
        <div class="product silver" onclick="addToCart('Vanilla Bean Creme Frappuccino')">Vanilla Bean<br>Creme<br>Frappuccino</div>
        <div class="blank"></div>
      </div>

      <div class="product-row blended">
        <div class="product light-yellow" onclick="addToCart('Blended Strawberry Lemonade')">Blended Strawberry Lemonade</div>
        <div class="blank"></div><div class="blank"></div><div class="blank"></div><div class="blank"></div>
      </div>

      <div class="product-row blended">
        <div class="blank"></div><div class="blank"></div><div class="blank"></div><div class="blank"></div><div class="blank"></div>
      </div>

      <div class="product-row seasonal-row">
        <div class="product light-yellow" onclick="addToCart('Seasonal Frappuccino')">Seasonal<br>Frappuccino</div>
        <div class="product light-yellow" onclick="addToCart('Seasonal Frappuccino')">Seasonal<br>Frappuccino</div>
        <div class="product light-yellow" onclick="addToCart('Featured Frappuccino')">Featured Frappuccino</div>
        <div class="product light-yellow" onclick="addToCart('LTO Frappuccino')">LTO Frappuccino</div>
        <div class="product light-yellow" onclick="addToCart('Seasonal Frappuccino')">Seasonal<br>Frappuccino</div>
      </div>
      `;

    const teaButtons = `
      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Chai Latte')">Chai Latte</div>
        <div class="product bright-green" onclick="addToCart('Matcha Latte')">Matcha Latte</div>
        <div class="product brown" onclick="addToCart('London Fog Latte')">London Fog Latte</div>
        <div class="product brown" onclick="addToCart('Custom Tea Latte')">Custom Tea Latte</div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Iced Pumpkin Cream Chai Latte')">Iced Pumpkin<br>Cream<br>Chai Latte</div>
        <div class="product bright-green" onclick="addToCart('Iced Banana Cream Protein Matcha')">Iced Banana<br>Cream<br>Protein<br>Matcha</div>
        <div class="product bright-green" onclick="addToCart('Protein Matcha')">Protein Matcha</div>
        <div class="product bright-green" onclick="addToCart('Sugar-Free Vanilla Protein Matcha')">Sugar-Free<br>Vanilla<br>Protein Matcha</div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product light-blue" onclick="addToCart('Black Iced Tea')">Black Iced Tea</div>
        <div class="product light-blue" onclick="addToCart('Green Iced Tea')">Green<br>Iced Tea</div>
        <div class="product light-blue" onclick="addToCart('Passion Iced Tea')">Passion Tango Iced Tea</div>
        <div class="product light-blue" onclick="addToCart('Peach Green Iced Tea')">Peach Green<br>Iced Tea</div>
        <div class="product light-blue" onclick="addToCart('Custom Iced Tea')">Custom<br>Iced Tea</div>
      </div>

      <div class="product-row">
        <div class="product yellow" onclick="addToCart('Black Tea Lemonade')">Black<br>Tea<br>Lemonade</div>
        <div class="product yellow" onclick="addToCart('Green Tea Lemonade')">Green<br>Tea<br>Lemonade</div>
        <div class="product yellow" onclick="addToCart('Passion Tea Lemonade')">Passion Tango&nbsp;Tea Lemonade</div>
        <div class="product yellow" onclick="addToCart('Peach Green Tea Lemonade')">Peach Green Tea Lemonade</div>
        <div class="product yellow" onclick="addToCart('Custom Tea Lemonade')">Custom Tea Lemonade</div>
      </div>

      <div class="product-row">
        <div class="product silver" onclick="addToCart('Royal English Breakfast Tea')">Royal English Breakfast Tea</div>
        <div class="product silver" onclick="addToCart('Earl Grey Tea')">Earl Grey<br>Tea</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="product-row">
        <div class="product light-blue" onclick="addToCart('Emperor's Cloud Tea')">Emporor's<br>Cloud<br>Tea</div>
        <div class="product purple" onclick="addToCart('Mint Majesty Tea')">Mint Majesty<br>Tea</div>
        <div class="product light-yellow" onclick="addToCart('Honey Citrus Mint Tea')">Honey Citrus<br>Mint Tea</div>
        <div class="product purple" onclick="addToCart('Chamomile Mint Blossom Tea')">Chamomile<br>Mint Blossom<br>Tea</div>
        <div class="blank"></div>
      </div>

      <br><br>

      <div class="product-row">
        <div class="product light-blue" onclick="addToCart('Iced Tea Refill')">Iced Tea<br>Refill</div>
        <div class="product silver" onclick="addToCart('Hot Tea Refill')">Hot Tea<br>Refill</div>
        <div class="product silver" onclick="addToCart('Add Tea Bag', 'modifier')">Add<br>Tea Bag</div>
        <div class="blank"></div>
        <div class="product black" onclick="alert('I am too lazy to put anything in here tbh')"><i>Regional &<br>Test</i></div>
      </div>
    `

    const otherButtons = `
      <div class="custom-row">
        <div class="product light-brown" onclick="addToCart('Hot Chocolate')">Hot Chocolate</div>
        <div class="product light-blue" onclick="addToCart('Cold Milk')">Cold Milk</div>
        <div class="product grey" onclick="addToCart('Steamed Milk')">Steamed Milk</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product bright-green" onclick="addToCart('Syrup Creme')">Syrup Creme</div>
        <div class="product bright-green" onclick="addToCart('Vanilla Creme')">Vanilla Creme</div>
        <div class="product bright-green" onclick="addToCart('Cinnamon Dolce Creme')">Cinnamon Dolce Creme</div>
        <div class="product yellow" onclick="addToCart('Lemonade')">Lemonade</div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
      </div>

      <div class="custom-row">
        <div class="product purple" onclick="addToCart('Strawberry Acai Refresher')">Strawberry<br>Acai<br>Refreshers</div>
        <div class="product purple" onclick="addToCart('Mango Dragonfruit Refresher')">Mango<br>Dragonfruit<br>Refreshers</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="product light-blue" onclick="addToCart('Water')">Cup of Water</div>
      </div>

      <div class="custom-row">
        <div class="product purple" onclick="addToCart('Strawberry Acai Lemonade')">Strawberry<br>Acai<br>Lemonade</div>
        <div class="product purple" onclick="addToCart('Mango Dragonfruit Lemonade')">Mango<br>Dragonfruit<br>Lemonade</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="product silver" onclick="addToCart('Cup of Ice')">Cup of Ice</div>
      </div>

      <div class="custom-row">
        <div class="product purple" onclick="addToCart('Pink Drink')">Pink<br>Drink</div>
        <div class="product purple" onclick="addToCart('Dragon Drink')">Dragon<br>Drink</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="product silver" onclick="addToCart('Pup Cup')">Pup Cup</div>
      </div>

      <div class="custom-row seasonal-row">
        <div class="product bright-green" onclick="addToCart('Seasonal Creme')">Seasonal<br>Creme</div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="blank"></div>
        <div class="product black" onclick="alert('The only thing you are testing is my patience. Jk lol')"><i>Test Items</i></div>
      <div class="product black" onclick="alert('Whats the password, green bean?')"><i>More Seasonal & Regional</i></div>
      </div>
    `

    const decafShotsButtons = `
      <div class="product-row">
        <div class="product light-blue" onclick="addToCart('Iced', 'hotOrIced')">Iced</div>
        <div class="blank"></div>
        <div class="product light-yellow" onclick="addToCart('Blonde Espresso', 'modifier')">Blonde</div>
        <div class="product grey" onclick="addToCart('Decaf', 'modifier')">Decaf</div>
        <div class="product grey" onclick="addToCart('1/2 Decaf', 'modifier')">1/2 Decaf</div>
      </div>

      <div class="product-row">
        <div class="blank"></div><div class="blank"></div><div class="blank"></div>
        <div class="product grey" onclick="addToCart('2/3 Decaf', 'modifier')">2/3 Decaf</div>
        <div class="product grey" onclick="addToCart('1/3 Decaf', 'modifier')">1/3 Decaf</div>
      </div>

      <div class="product-row">
        <div class="product purple" onclick="addToCart('Single Espresso')">Single (Solo)</div>
        <div class="product purple" onclick="addToCart('Doppio Espresso')">Double (Doppio)</div>
        <div class="product purple" onclick="addToCart('Triple Espresso')">Triple</div>
        <div class="product purple" onclick="addToCart('Quad Espresso')">Quad</div>
        <div class="product purple" onclick="openEspressoShots('moreShots')">More Shots</div>
      </div>

      <div class="product-row">
        <div class="product brown" onclick="addToCart('Affogato', 'modifier')">Affogato</div>
        <div class="blank"></div><div class="blank"></div><div class="blank"></div>
        <div class="product light-brown" onclick="addToCart('Frappuccino Roast Coffee', 'modifier')">Frappuccino Roast Coffee</div>
      </div>

      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Kids', 'size')">Kids</div>
        <div class="blank"></div>
        <div class="product teal" onclick="addToCart('Updosed', 'modifier')">Updosed</div>
        <div class="product teal" onclick="addToCart('Long Shot', 'modifier')">Long Shot</div>
        <div class="product teal" onclick="addToCart('Ristretto', 'modifier')">Ristretto</div>
      </div>

      <div class="product-row">
        <div class="product light-yellow" onclick="addToCart('Short', 'size')">Short</div>
        <div class="product light-yellow" onclick="addToCart('Tl', 'size')">Tall</div>
        <div class="product light-yellow" onclick="addToCart('Gr', 'size')">Grande</div>
        <div class="product light-yellow" onclick="addToCart('Venti', 'size')">Venti</div>
        <div class="product light-yellow" onclick="addToCart('Trenta', 'size')">Trenta</div>
      </div>
      `;

  const syrupButtons = `
    <div class="product-row">
      <div class="product black" onclick="addToCart('No', 'prefix')">No</div>
      <div class="product black" onclick="addToCart('Sub', 'prefix')">Sub</div>
      <div class="product light-yellow" onclick="addToCart('Pumps', 'prefix')">Pumps</div>
      <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
      <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
    </div>

    <div class="product-row">
      <div class="product grey" onclick="addToCart('Caramel Syrup','modifier')">Caramel Syrup</div>
      <div class="product grey" onclick="addToCart('Cinnamon Dolce Syrup','modifier')">Cinnamon Dolce Syrup</div>
      <div class="product grey" onclick="addToCart('Hazelnut Syrup','modifier')">Hazelnut Syrup</div>
      <div class="product grey" onclick="addToCart('Vanilla Syrup','modifier')">Vanilla Syrup</div>
      <div class="blank"></div>
    </div>

    <div class="product-row">
      <div class="product grey" onclick="addToCart('Classic Syrup','modifier')">Classic Syrup</div>
      <div class="product grey" onclick="addToCart('Peppermint Syrup','modifier')">Peppermint Syrup</div>
      <div class="product grey" onclick="addToCart('Brown Sugar Syrup','modifier')">Brown Sugar Syrup</div>
      <div class="blank"></div><div class="blank"></div>
    </div>

    <div class="product-row">
      <div class="product bright-green" onclick="addToCart('Chai','modifier')">Chai</div>
      <div class="product grey" onclick="addToCart('Honey Blend','modifier')">Honey Blend</div>
      <div class="blank"></div><div class="blank"></div><div class="blank"></div>
    </div>

    <div class="product-row">
      <div class="product silver" onclick="addToCart('Sugar Free Vanilla Syrup','modifier')">Sugar Free Vanilla Syrup</div>
      <div class="blank"></div><div class="blank"></div><div class="blank"></div><div class="blank"></div>
    </div>

    <div class="product-row">
      <div class="product purple" onclick="addToCart('Mocha Sauce','modifier')">Mocha Sauce</div>
      <div class="product purple" onclick="addToCart('White Chocolate Mocha','modifier')">White Chocolate Mocha</div>
      <div class="product purple" onclick="addToCart('Caramel Sauce','modifier')">Caramel Sauce</div>
      <div class="product purple" onclick="addToCart('Dark Caramel Sauce','modifier')">Dark Caramel Sauce</div>
      <div class="blank"></div>
    </div>

    <div class="product-row seasonal-row">
      <div class="product light-yellow" onclick="addToCart('Seasonal Syrup','modifier')">Seasonal Syrup</div>
      <div class="product light-yellow" onclick="addToCart('Seasonal Sauce','modifier')">Seasonal Sauce</div>
      <div class="product light-yellow" onclick="addToCart('Seasonal Syrup','modifier')">Seasonal Syrup</div>
      <div class="blank"></div><div class="blank"></div>
    </div>
    `;

  const milkButtons = `
    <div class="product-row">
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
      <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
    </div>

    <div class="product-row">
      <div class="product light-blue" onclick="addToCart('Nonfat Milk','milk')">Nonfat Milk</div>
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="product light-blue" onclick="addToCart('Nonfat Milk 1/2&quot;','modifier')">Splash of Nonfat&nbsp;Milk</div>
      <div class="blank"></div>
    </div>

    <div class="product-row">
      <div class="product light-blue" onclick="addToCart('2% Milk','milk')">2% Milk</div>
      <div class="product light-blue" onclick="addToCart('Whole Milk','milk')">Whole Milk</div>
      <div class="blank"></div>
      <div class="product light-blue" onclick="addToCart('2% Milk 1/2&quot;','modifier')">Splash of<br>2% Milk</div>
      <div class="product light-blue" onclick="addToCart('Whole Milk 1/2&quot;','modifier')">Splash of Whole&nbsp;Milk</div>
    </div>

    <div class="product-row">
      <div class="product light-yellow" onclick="addToCart('Soy Milk','milk')">Soy Milk</div>
      <div class="product light-yellow" onclick="addToCart('Oatmilk','milk')">Oatmilk</div>
      <div class="product light-yellow" onclick="addToCart('Protein Milk','milk')">Protein Milk</div>
      <div class="product light-yellow" onclick="addToCart('Soy Milk 1/2&quot;','modifier')">Splash of<br>Soy Milk</div>
      <div class="product light-yellow" onclick="addToCart('Oatmilk 1/2&quot;','modifier')">Splash of Oatmilk</div>
    </div>

    <div class="product-row">
      <div class="product light-yellow" onclick="addToCart('Coconut Milk','milk')">Coconut Milk</div>
      <div class="product light-yellow" onclick="addToCart('Almond Milk','milk')">Almond Milk</div>
      <div class="blank"></div>
      <div class="product light-yellow" onclick="addToCart('Coconut Milk 1/2&quot;','modifier')">Splash of Coconut&nbsp;Milk</div>
      <div class="product light-yellow" onclick="addToCart('Almond Milk 1/2&quot;','modifier')">Splash of Almond&nbsp;Milk</div>
    </div>

    <div class="product-row">
      <div class="product purple" onclick="addToCart('Breve','milk')">Half & Half<br>(Breve)</div>
      <div class="product purple" onclick="addToCart('Heavy Cream','milk')">Heavy Cream</div>
      <div class="blank"></div>
      <div class="product purple" onclick="addToCart('Half & Half 1/2&quot;','modifier')">Splash of<br>Half & Half<br>Cream</div>
      <div class="product purple" onclick="addToCart('Heavy Cream 1/2&quot;','modifier')">Splash of Heavy Cream</div>
    </div>

    <div class="product-row">
      <div class="product light-blue" onclick="addToCart('Vanilla Sweet Cream','modifier')">Vanilla<br>Sweet Cream</div>
      <div class="product brown" onclick="addToCart('ND Vanilla Sweet Cream','modifier')">ND Vanilla Sweet Cream</div>
      <div class="blank"></div>
      <div class="product light-blue" onclick="addToCart('Vanilla Sweet Cream 1/2&quot;','modifier')">Splash of Vanilla&nbsp;Sweet<br>Cream</div>
      <div class="product brown" onclick="addToCart('ND Vanilla Sweet Cream 1/2&quot;','modifier')">Splash of<br>ND Vanilla Sweet<br>Cream</div>
    </div>

    <div class="product-row">
      <div class="product light-blue" onclick="addToCart('Add Dairy','modifier')">Add Dairy</div>
      <div class="blank"></div><div class="blank"></div>
      <div class="product black" onclick="alert('Thank your trainer today :)')"><i>Regional & Test</i></div>
      <div class="blank"></div>
    </div>
    `;

  const customButtons = `
    <div class="product-row custom-row">
      <div class="product black" onclick="addToCart('No', 'prefix')">No</div>
      <div class="product black" onclick="addToCart('Sub', 'prefix')">Sub</div>
      <div class="blank"></div>
      <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
      <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="product light-blue" onclick="addToCart('Ice','modifier')">Ice</div>
      <div class="product light-blue" onclick="addToCart('Water','modifier')">Water</div>
      <div class="product light-blue" onclick="addToCart('Whipped Cream','modifier')">Whipped Cream</div>
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="product brown" onclick="addToCart('Agave','modifier')">Agave</div>
      <div class="product brown" onclick="addToCart('Splenda','modifier')">Splenda</div>
      <div class="product brown" onclick="addToCart('Sugar','modifier')">Sugar</div>
      <div class="product brown" onclick="addToCart('Stevia','modifier')">Stevia</div>
      <div class="product brown" onclick="addToCart('Honey','modifier')">Honey</div>
      <div class="product brown" onclick="addToCart('Raw Sugar','modifier')">Raw Sugar</div>
    </div>

    <div class="product-row custom-row">
      <div class="product purple" onclick="addToCart('Strawberry Puree','modifier')">Strawberry Puree</div>
      <div class="product purple" onclick="addToCart('Frappuccino Chips','modifier')">Frappuccino Chips</div>
      <div class="product purple" onclick="addToCart('Vanilla Bean Powder','modifier')">Vanilla Bean<br>Powder</div>
      <div class="product purple" onclick="addToCart('Matcha Powder','modifier')">Matcha</div>
      <div class="product purple" onclick="addToCart('Blueberries','modifier')">Add Blueberries</div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="product light-yellow" onclick="addToCart('Lemonade','modifier')">Lemonade</div>
      <div class="product light-blue" onclick="addToCart('Mocha Drizzle','modifier')">Mocha Drizzle</div>
      <div class="product light-blue" onclick="addToCart('Line the Cup w/Mocha','modifier')">Line the Cup<br>w/Mocha</div>
      <div class="product light-blue" onclick="addToCart('Caramel Drizzle','modifier')">Caramel<br>Drizzle</div>
      <div class="product light-blue" onclick="addToCart('Line the Cup w/Caramel','modifier')">Line the Cup<br>w/Caramel</div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="product silver" onclick="addToCart('Foam','modifier')">Foam</div>
      <div class="product black coldFoamsButton" onclick="showColdFoamOptions()">Cold Foams</div>
      <div class="product teal" onclick="addToCart('Strawberry Inclusions','modifier')">Strawberry Inclusions</div>
      <div class="product teal" onclick="addToCart('Mango Dragonfruit Inclusions','modifier')">Mango Dragonfruit Inclusions</div>
      <div class="blank"></div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="blank"></div>
      <div class="product black" onclick="alert('Honestly you will never need this button lol')"><i>Regional & Test Modifiers</i></div>
      <div class="blank"></div>
    </div>

    <div class="product-row custom-row">
      <div class="product silver" onclick="addToCart('With Room','modifier')">With Room</div>
      <div class="product light-yellow" onclick="addToCart('Extra Hot','modifier')">Extra Hot</div>
      <div class="product light-yellow" onclick="addToCart('Personal Cup','modifier')">Personal Cup</div>
      <div class="product light-yellow" onclick="addToCart('For Here Cup','modifier')">For Here Cup</div>
      <div class="product black" onclick="showMoreCustomToppings()"><i>More Custom<br>Toppings &<br>Inclusions</i></div>
      <div class="product black" onclick="showMoreCustomDirections()"><i>More Custom Directions</i></div>
    </div>
    `;

class Drink {
  constructor(base) {
    this.base = base;
    this.size = "Gr";
    this.hotOrIced = "";
    this.modifiers = [];
  }

  addModifier(type, value) {
    if (type === "size") this.size = value;
    else if (type === "hotOrIced") this.hotOrIced = value;
    else this.modifiers.push(value);
  }

  getLabel() {
    let label = `${this.hotOrIced} ${this.base}`;
    if (this.size) label = `${this.size} ${label}`;
    if (this.modifiers.length) label += " (" + this.modifiers.join(", ") + ")";
    return label;
  }
}

let cart = [];
let currentDrink = null;
const cartItemsDiv = document.getElementById("cartItems");
const totalsDiv = document.getElementById("totals");
const mainGrid = document.getElementById("main-grid");

let currentPrefix = null;
let pendingQuantity = null; 

let selectedCartItem = { drinkIndex: null, modifierIndex: null }; 

let currentTopTab = "drink";
let currentBottomTab = "brewed";

function selectTopTab(btn) {
  document.querySelectorAll(".top-tabs button").forEach(b => b.classList.remove("active"));
  btn.classList.add("active");
  currentTopTab = btn.id;
  if (btn.id === "drink") selectBottomTab(document.querySelector(".bottom-tabs button"), "brewed");
  else mainGrid.innerHTML = "<h3 style='text-align:center;margin-top:20px;'>Coming Soon!</h3>";
}

function selectBottomTab(btn, category) {
  document.querySelectorAll(".bottom-tabs button").forEach(b => b.classList.remove("active"));
  
  document.querySelectorAll(".modifiers button").forEach(b => b.classList.remove("active"));

  btn.classList.add("active");
  currentBottomTab = category;

  switch (category) {
    case "brewed": mainGrid.innerHTML = brewedButtons; break;
    case "espresso": mainGrid.innerHTML = espressoButtons; break;
    case "blended": mainGrid.innerHTML = blendedButtons; break;
    case "tea": mainGrid.innerHTML = teaButtons; break;
    case "other": mainGrid.innerHTML = otherButtons; break;
  }
}

function selectRightTab(btn, category) {
  document.querySelectorAll(".modifiers button").forEach(b => b.classList.remove("active"));

  document.querySelectorAll(".bottom-tabs button").forEach(b => b.classList.remove("active"));

  btn.classList.add("active");

  mainGrid.innerHTML = getModifierButtons(category);
}


function getModifierButtons(category) {
  switch (category) {
    case "decafShots":
      return decafShotsButtons;
    case "syrup":
      return syrupButtons;
    case "milk":
      return milkButtons;
    case "custom":
      return customButtons;
    default:
      return "<div style='text-align:center;margin-top:20px;'>Modifiers for this section coming soon.</div>";
  }
}

function addToCart(item, type = "base") {
  if (!currentDrink) {
    currentDrink = new Drink("[Default Drink]");
    cart.push(currentDrink);
    selectedCartItem = { drinkIndex: cart.length - 1, modifierIndex: null };
  }

  if (type === "base") {
    if (currentDrink.base === "[Default Drink]") {
      currentDrink.base = item;
    } else {
      currentDrink = new Drink(item);
      cart.push(currentDrink);
    }
    selectedCartItem = { drinkIndex: cart.length - 1, modifierIndex: null };
  }

  else if (type === "prefix") {
    currentPrefix = item;
    return;
  }

  else if (type === "size" || type === "hotOrIced") {
    currentDrink.addModifier(type, item);
  }

  else if (type === "milk") {
    if (!currentDrink.modifiers) currentDrink.modifiers = [];
    if (!currentDrink.modifierQuantities) currentDrink.modifierQuantities = [];

    const milkIndex = currentDrink.modifiers.findIndex(mod => mod.toLowerCase().includes("milk"));

    if (milkIndex !== -1) {
      currentDrink.modifiers[milkIndex] = item;
      currentDrink.modifierQuantities[milkIndex] = 1;
    } else {
      currentDrink.modifiers.push(item);
      currentDrink.modifierQuantities.push(1);
    }
  }

  else if (type === "modifier") {
  const modifierName = currentPrefix ? `${currentPrefix} ${item}` : item;
  if (!currentDrink.modifiers) currentDrink.modifiers = [];
  if (!currentDrink.modifierQuantities) currentDrink.modifierQuantities = [];

  const modIndex = currentDrink.modifiers.findIndex(mod => mod === modifierName);
  if (modIndex !== -1) {
    currentDrink.modifierQuantities[modIndex]++;
  } else {
    currentDrink.modifiers.push(modifierName);
    currentDrink.modifierQuantities.push(pendingQuantity || 1);
  }

  currentPrefix = null;
  pendingQuantity = null;
}

  renderCart();
}


function renderCart() {
  cartItemsDiv.innerHTML = "";

  cart.forEach((drink, drinkIndex) => {
    const drinkDiv = document.createElement("div");
    drinkDiv.className = "cart-item";
    drinkDiv.innerHTML = `
      <span>${drink.size ? drink.size + " " : ""}${drink.hotOrIced ? drink.hotOrIced + " " : ""}${drink.base}</span>
    `;

    if (drink === currentDrink) {
      drinkDiv.classList.add("current");
    }

    drinkDiv.addEventListener("click", () => {
      currentDrink = drink;
      selectCartItem(drinkIndex, null);
    });

    if (
      selectedCartItem.drinkIndex === drinkIndex &&
      selectedCartItem.modifierIndex === null
    ) {
      drinkDiv.classList.add("selected");
    }

    cartItemsDiv.appendChild(drinkDiv);

    if (drink.modifiers.length) {
      const modsDiv = document.createElement("div");
      modsDiv.className = "cart-modifiers";

      if (drink === currentDrink) {
        modsDiv.classList.add("current");
      }

      drink.modifiers.forEach((m, modIndex) => {
        const modSpan = document.createElement("span");
        modSpan.className = "modifier-text";
        modSpan.style.display = "block";
        modSpan.innerHTML = "";

        if (drink.modifierQuantities && drink.modifierQuantities[modIndex] > 1) {
          modSpan.innerHTML += `${drink.modifierQuantities[modIndex]} `;
        }

        modSpan.innerHTML += m;

        modSpan.addEventListener("click", (e) => {
          e.stopPropagation();
          currentDrink = drink;
          selectCartItem(drinkIndex, modIndex);
        });

        if (
          selectedCartItem.drinkIndex === drinkIndex &&
          selectedCartItem.modifierIndex === modIndex
        ) {
          modSpan.classList.add("selected");
        }

        modsDiv.appendChild(modSpan);
      });

      cartItemsDiv.appendChild(modsDiv);
    }
  });

  totalsDiv.textContent = `Total: $${(cart.length * 0).toFixed(2)}`;
}

function selectCartItem(drinkIndex, modifierIndex = null) {
  selectedCartItem = { drinkIndex, modifierIndex };
  renderCart();
}

function voidSelection() {
  const { drinkIndex, modifierIndex } = selectedCartItem;

  if (drinkIndex === null) return;

  if (modifierIndex === null) {
    cart.splice(drinkIndex, 1);
    currentDrink = null;
  } else {
    cart[drinkIndex].modifiers.splice(modifierIndex, 1);
    if (cart[drinkIndex].modifierQuantities) {
      cart[drinkIndex].modifierQuantities.splice(modifierIndex, 1);
    }
    tempQuantity = "";
    quantityDisplay.textContent = "0";
  }

  selectedCartItem = { drinkIndex: null, modifierIndex: null };
  renderCart();
}

function nextDrink() {
  if (currentDrink && currentDrink.base !== "[Default Drink]") {
    if (!cart.includes(currentDrink)) {
      cart.push(currentDrink);
    }
  }

  currentDrink = null;
  currentPrefix = null;
  selectedCartItem = { drinkIndex: null, modifierIndex: null };

  document.querySelectorAll(".cart-item.selected, .cart-modifiers span.selected").forEach(el => {
    el.classList.remove("selected");
  });

  renderCart();
}

const quantityBtn = document.getElementById("quantity-btn");
const quantityModal = document.getElementById("quantity-modal");
const quantityDisplay = document.getElementById("quantity-display");
let tempQuantity = "";

quantityBtn.addEventListener("click", () => {
  tempQuantity = "";
  quantityDisplay.textContent = "";
  quantityModal.style.display = "flex";
});


document.querySelectorAll(".num-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    if (btn.id === "quantity-enter") {
      submitQuantity();
    } else {
      if (tempQuantity.length < 3) {  // max 3 digits
        tempQuantity += btn.textContent;
        quantityDisplay.textContent = tempQuantity;
      }
    }
  });
});

function submitQuantity() {
  const qty = parseInt(tempQuantity || "1", 10);
  const { drinkIndex, modifierIndex } = selectedCartItem;

  if (drinkIndex !== null && modifierIndex !== null) {
    const drink = cart[drinkIndex];
    if (!drink.modifierQuantities) drink.modifierQuantities = [];
    drink.modifierQuantities[modifierIndex] = qty;
    renderCart();
  } else {
    pendingQuantity = qty;
  }

  quantityModal.style.display = "none";
}

function clearQty() {
  tempQuantity = "";
  quantityDisplay.textContent = "";
}

function updateBaseDrink(newBase) {
  if (!currentDrink) {
    return;
  }

  currentDrink.base = newBase;

  const drinkIndex = cart.indexOf(currentDrink);
  selectedCartItem = { drinkIndex, modifierIndex: null };
  
  renderCart();
}

// --- Shared Espresso Shots Modal ---
let espressoShotsMode = null;

const espressoShotsModal = document.getElementById("espressoShotsModal");
const customEspressoShotsInput = document.getElementById("customEspressoShots");

function openEspressoShots(mode) {
  espressoShotsMode = mode;
  espressoShotsModal.style.display = "flex";
  customEspressoShotsInput.value = "";
  customEspressoShotsInput.focus();
}

function closeEspressoShots() {
  espressoShotsModal.style.display = "none";
  espressoShotsMode = null;
}

function handleEspressoShots(num) {
  processEspressoShots(num);
  closeEspressoShots();
}

function submitCustomEspressoShots() {
  const num = parseInt(customEspressoShotsInput.value, 10);
  if (!num || num < 1) {
    alert("Please enter a valid number of shots.");
    return;
  }
  processEspressoShots(num);
  closeEspressoShots();
}

function processEspressoShots(num) {
  if (!currentDrink) {
    const baseName = espressoShotsMode === "espresso" ? getEspressoBaseName(num) : "Espresso";
    currentDrink = new Drink(baseName);
    cart.push(currentDrink);
  }

  if (!currentDrink.modifiers) currentDrink.modifiers = [];
  if (!currentDrink.modifierQuantities) currentDrink.modifierQuantities = [];

  if (espressoShotsMode === "espresso") {
    if (num >= 1 && num <= 4) {
      updateBaseDrink(getEspressoBaseName(num));

      const existingIndex = currentDrink.modifiers.findIndex(
        m => m.toLowerCase() === "shots"
      );
      if (existingIndex !== -1) {
        currentDrink.modifiers.splice(existingIndex, 1);
        currentDrink.modifierQuantities.splice(existingIndex, 1);
      }
    } else {
      updateBaseDrink("Espresso");
      addOrUpdateShotsModifier(num);
    }
  } else if (espressoShotsMode === "moreShots") {
    addOrUpdateShotsModifier(num);
  }

  renderCart();
}

// --- helper functions ---

function getEspressoBaseName(num) {
  const shotNames = {
    1: "Solo Espresso",
    2: "Doppio Espresso",
    3: "Triple Espresso",
    4: "Quad Espresso"
  };
  return shotNames[num] || "Espresso";
}

function addOrUpdateShotsModifier(num) {
  let index = currentDrink.modifiers.findIndex(m => m.toLowerCase() === "shots");
  if (index === -1) {
    currentDrink.modifiers.push("Shots");
    currentDrink.modifierQuantities.push(num);
    index = currentDrink.modifiers.length - 1;
  } else {
    currentDrink.modifierQuantities[index] = num;
  }

  const drinkIndex = cart.indexOf(currentDrink);
  selectedCartItem = { drinkIndex, modifierIndex: index };
}

function validateShotInput(input) {
  input.value = input.value.replace(/\D/g, '');

  if (parseInt(input.value, 10) > 99) {
    input.value = '99';
  }

  if (input.value.startsWith('0')) {
    input.value = input.value.replace(/^0+/, '');
  }
}

let previousMainGridHTML = ""; // store current layout so we can restore it later

function showColdFoamOptions() {
  const container = document.getElementById("main-grid");

  // Save current layout
  previousMainGridHTML = container.innerHTML;

  // Replace with Cold Foam options
  container.innerHTML = `
    <div style="width: 100%; height: 4%; background: darkgreen; color: white; font-size: 1.1em; padding-top: 1%; padding-left: 1%; margin-bottom: 1%;">Cold Foams</div>
    <!-- Row 1 -->
    <div class="custom-row">
    <div class="product black" onclick="addToCart('No', 'prefix')">No</div>
    <div class="product black" onclick="addToCart('Sub', 'prefix')">Sub</div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
    <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
    </div>

    <!-- Row 2 -->
    <div class="custom-row">
    <div class="product silver" onclick="addToCart('Vanilla Sweet Cream Cold Foam', 'modifier')">Vanilla Sweet Cream Cold Foam</div>
    <div class="product silver" onclick="addToCart('Salted Caramel Cream Cold Foam', 'modifier')">Salted Caramel Cream Cold Foam</div>
    <div class="product silver" onclick="addToCart('Chocolate Cream Cold Foam', 'modifier')">Chocolate Cream Cold Foam</div>
    <div class="product silver" onclick="addToCart('Wt Chocolate Mocha Cold Foam', 'modifier')">Wt Chocolate Mocha Cold Foam</div>
    <div class="product silver" onclick="addToCart('Matcha Cream Cold Foam', 'modifier')">Matcha Cream Cold Foam</div>
    <div class="product silver" onclick="addToCart('Banana Cream Cold Foam', 'modifier')">Banana Cream Cold Foam</div>
    </div>

    <!-- Row 3 (blank) -->
    <div class="custom-row">
    ${'<div class="blank"></div>'.repeat(6)}
    </div>

    <!-- Row 4 -->
    <div class="custom-row">
    <div class="product purple" onclick="addToCart('ND Vanilla Sweet Cream Cold Foam', 'modifier')">ND Vanilla Sweet Cream Cold Foam</div>
    <div class="product purple" onclick="addToCart('ND Salted Caramel Cream Cold Foam', 'modifier')">ND Salted Caramel Cream Cold Foam</div>
    <div class="product purple" onclick="addToCart('ND Chocolate Cream Cold Foam', 'modifier')">ND Chocolate Cream Cold Foam</div>
    <div class="product purple" onclick="addToCart('ND Matcha Cream Cold Foam', 'modifier')">ND Matcha Cream Cold Foam</div>
    <div class="product purple" onclick="addToCart('ND Brown Sugar Cream Cold Foam', 'modifier')">ND Brown Sugar Cream Cold Foam</div>
    <div class="product purple" onclick="addToCart('ND Strawberry Cream Cold Foam', 'modifier')">ND Strawberry Cream Cold Foam</div>
    </div>

    <!-- Row 5 -->
    <div class="custom-row">
    <div class="product brown" onclick="addToCart('Vanilla Protein Cold Foam', 'modifier')">Vanilla Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Chocolate Protein Cold Foam', 'modifier')">Chocolate Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Matcha Protein Cold Foam', 'modifier')">Matcha Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Salted Caramel Protein Cold Foam', 'modifier')">Salted Caramel Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Unsweet Protein Cold Foam', 'modifier')">Unsweet Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Brown Sugar Protein Cold Foam', 'modifier')">Brown Sugar Protein Cold Foam</div>
    </div>

    <!-- Row 6 -->
    <div class="custom-row">
    <div class="product brown" onclick="addToCart('Sugar Free Vanilla Protein Cold Foam', 'modifier')">Sugar Free Vanilla Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Banana Protein Cold Foam', 'modifier')">Banana Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Pecan Protein Cold Foam', 'modifier')">Pecan Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Pumpkin Protein Cold Foam', 'modifier')">Pumpkin Protein Cold Foam</div>
    <div class="product brown" onclick="addToCart('Apple Crisp Protein Cold Foam', 'modifier')">Apple Crisp Protein Cold Foam</div>
    <div class="blank"></div>
    </div>

    <!-- Row 7 -->
    <div class="custom-row">
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="product red" style="background: darkgreen; color: white;" onclick="restoreMainGrid()">Done</div>
    </div>
  `;
}

function showMoreCustomToppings() {
  const container = document.getElementById("main-grid");

  previousMainGridHTML = container.innerHTML;

  container.innerHTML = `
    <div style="width: 100%; height: 4%; background: darkgreen; color: white; font-size: 1.1em; padding-top: 1%; padding-left: 1%; margin-bottom: 1%;">More Custom Toppings & Inclusions</div>
    <div class="custom-row">
    <div class="product black" onclick="addToCart('No', 'prefix')">No</div>
    <div class="product black" onclick="addToCart('Sub', 'prefix')">Sub</div>
    <div class="product blank"></div>
    <div class="product blank"></div>
    <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
    <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
    </div>

    <div class="custom-row">
    <div class="product purple" onclick="addToCart('Cinnamon Powder', 'modifier')">Cinnamon Powder</div>
    ${'<div class="product blank"></div>'.repeat(5)}
    </div>

    <div class="custom-row">
    <div class="product purple" onclick="addToCart('Peach Juice Blend', 'modifier')">Peach Juice Blend</div>
    <div class="product brown" onclick="addToCart('Black Tea Base', 'modifier')">Black Tea Base</div>
    <div class="product brown" onclick="addToCart('Green Tea Base', 'modifier')">Green Tea Base</div>
    <div class="product brown" onclick="addToCart('Passion Tango Tea Base', 'modifier')">Passion Tango Tea Base</div>
    <div class="product blank"></div>
    <div class="product blank"></div>
    </div>

    <div class="custom-row">
    <div class="product brown" onclick="addToCart('Strawberry Acai Refresher Base', 'modifier')">Strawberry Acai Refresher Base</div>
    <div class="product brown" onclick="addToCart('Dragonfruit Refresher Base', 'modifier')">Dragonfruit Refresher Base</div>
    ${'<div class="product blank"></div>'.repeat(4)}
    </div>

    <div class="custom-row">
    <div class="product brown" onclick="addToCart('No Water + Extra Strawberry Base', 'modifier')">No Water + Extra Strawberry Base</div>
    <div class="product brown" onclick="addToCart('No Water + Extra Mango Base', 'modifier')">No Water + Extra Mango Base</div>
    ${'<div class="product blank"></div>'.repeat(4)}
    </div>

    <div class="custom-row">
    <div class="product light-blue" onclick="addToCart('Cinnamon Dolce Topping', 'modifier')">Cinnamon Dolce Topping</div>
    <div class="product light-blue" onclick="addToCart('Cookie Crumble Topping', 'modifier')">Cookie Crumble Topping</div>
    <div class="product light-blue" onclick="addToCart('Caramel Sugar Topping', 'modifier')">Caramel Sugar Topping</div>
    <div class="product light-blue" onclick="addToCart('No Topping', 'modifier')">No Topping</div>
    <div class="product light-blue" onclick="addToCart('Pumpkin Spice Topping', 'modifier')">Pumpkin Spice Topping</div>
    <div class="product blank"></div>
    </div>

    <div class="custom-row">
    <div class="product light-blue" onclick="addToCart('Pecan Crunch Topping', 'modifier')">Pecan Crunch Topping</div>
    ${'<div class="product blank"></div>'.repeat(5)}
    </div>

    <div class="custom-row">
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="blank"></div>
    <div class="product red" style="background: darkgreen; color: white;" onclick="restoreMainGrid()">Done</div>
    </div>
  `;
}

function showMoreCustomDirections() {
  const container = document.getElementById("main-grid");

  previousMainGridHTML = container.innerHTML;

  container.innerHTML = `
    <div style="width: 100%; height: 4%; background: darkgreen; color: white; font-size: 1.1em; padding-top: 1%; padding-left: 1%; margin-bottom: 1%;">More Custom Directions</div>
    <div class="product-row">
    <div class="product black" onclick="addToCart('No', 'prefix')">No</div>
    <div class="product black" onclick="addToCart('Sub', 'prefix')">Sub</div>
    <div class="product blank"></div>
    <div class="product black" onclick="addToCart('Extra', 'prefix')">Extra</div>
    <div class="product black" onclick="addToCart('Light', 'prefix')">Light</div>
    </div>

    <div class="product-row">
    <div class="product yellow" onclick="addToCart('Warm', 'modifier')">Warm</div>
    <div class="product yellow" onclick="">Temperature</div>
    <div class="product yellow" onclick="addToCart('Steamed', 'modifier')">Steamed</div>
    <div class="product blank"></div>
    <div class="product blank"></div>
    </div>

    <div class="product-row">
    <div class="product silver" onclick="addToCart('Wet', 'modifier')">Wet</div>
    <div class="product silver" onclick="addToCart('Dry', 'modifier')">Dry</div>
    <div class="product blank"></div>
    <div class="product blank"></div>
    <div class="product yellow" onclick="">Alternate Handoff</div>
    </div>

    <div class="product-row">
    <div class="product yellow" onclick="addToCart('Short Cup', 'modifier')">Short Cup</div>
    <div class="product yellow" onclick="addToCart('Tall Cup', 'modifier')">Tall Cup</div>
    <div class="product yellow" onclick="addToCart('Grande Cup', 'modifier')">Grande Cup</div>
    <div class="product yellow" onclick="addToCart('Venti Cup', 'modifier')">Venti Cup</div>
    <div class="product blank"></div>
    </div>

    <div class="product-row">
    <div class="product yellow" onclick="addToCart('Double Cup', 'modifier')">Double Cup</div>
    <div class="product yellow" onclick="addToCart('Flat Lid', 'modifier')">Flat Lid</div>
    <div class="product yellow" onclick="addToCart('Dome Lid', 'modifier')">Dome Lid</div>
    <div class="product yellow" onclick="addToCart('Nitro Lid', 'modifier')">Nitro Lid</div>
    <div class="product blank"></div>
    </div>

    <div class="product-row">
    <div class="product purple" onclick="addToCart('Dont Make', 'modifier')">Don't Make</div>
    <div class="product purple" onclick="addToCart('Pour on Top', 'modifier')">Pour on Top</div>
    <div class="product purple" onclick="addToCart('Upside Down', 'modifier')">Upside Down</div>
    <div class="product purple" onclick="addToCart('Stirred', 'modifier')">Stirred</div>
    <div class="product purple" onclick="addToCart('Blended', 'modifier')">Blended</div>
    </div>

    <div class="product-row">
    <div class="product purple" onclick="addToCart('Double Blended', 'modifier')">Double Blended</div>
    <div class="product purple" onclick="addToCart('On The Side', 'modifier')">On The Side</div>
    <div class="product blank"></div>
    <div class="product blank"></div>
        <div class="product red" style="background: darkgreen; color: white;" onclick="restoreMainGrid()">Done</div>
    </div>
  </div>
  `;
}

function restoreMainGrid() {
  const container = document.getElementById("main-grid");
  container.innerHTML = previousMainGridHTML;
}

function tabReset() {
  selectRightTab(document.querySelector(".modifiers button"), "decafShots");
}

// Initialize
  window.onload = () => {
    selectTopTab(document.getElementById("drink"));
    selectRightTab(document.querySelector(".modifiers button"), "decafShots");
    renderCart();
  };
</script>

</body>
</html>